[gd_scene load_steps=9 format=3 uid="uid://cmkl0oi88a0ax"]

[ext_resource type="PackedScene" uid="uid://xwifhd41ifg0" path="res://Scenes/Manager/global_coordinator.tscn" id="1_e6t2j"]
[ext_resource type="PackedScene" uid="uid://ck8bmislhupdm" path="res://Scenes/Map/debug_box.tscn" id="2_0vidy"]
[ext_resource type="PackedScene" uid="uid://bac7pqs8qpv04" path="res://Scenes/Map/Level/level.tscn" id="2_4ollf"]
[ext_resource type="PackedScene" uid="uid://8h1a3ta0q3gh" path="res://Scenes/Map/player_block.tscn" id="2_6kotc"]
[ext_resource type="PackedScene" uid="uid://cqsj5b8qblspt" path="res://Scenes/Map/npc_spawner.tscn" id="2_ib4qg"]
[ext_resource type="PackedScene" uid="uid://dduh8kcvnesk7" path="res://Scenes/Map/patrol_node.tscn" id="5_7ixm2"]
[ext_resource type="PackedScene" uid="uid://dtxs2a0p0stwh" path="res://Scenes/Player/player.tscn" id="6_qvy4h"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_vbtsb"]
vertices = PackedVector2Array(1290, 394, 1802, 470, 1526, 470, 1098, 458, 1206, 394, 906, 566, 822, 566, 394, 554, 438, 554, 714, 906, 1078, 1014.87, 10.9609, 1015.98, 202, 970, 630, 906, 1718, 330, 1802, 330, 118, 970, 1802, 54, 1907.99, 12.9688, 1907, 1014.01, 1866, 822, 842, 10.1875, 1718, 54, 330, 202, 330, 118, 470, 118, 470, 394, 438, 470, 906, 842, 1078, 758, 822, 842, 714, 630, 630, 630, 7.03125, 8.02344, 118, 694, 1866, 906, 1162, 1014.78, 1590, 906, 1450, 906, 1366, 906, 1366, 630, 1162, 758, 1206, 554, 1526, 554, 1802, 554, 1590, 822, 1450, 630, 1290, 118, 1206, 118, 202, 694, 118, 554, 118, 470, 54, 202, 1482, 554, 1482, 470, 1206, 470, 714, 554, 714, 470, 1014, 458, 554, 394, 554, 118, 758, 266, 394, 470, 1098, 182, 1014, 182, 842, 266, 758, 9.96875, 54, 118)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3, 4), PackedInt32Array(5, 6, 7, 8), PackedInt32Array(9, 10, 11, 12, 13), PackedInt32Array(0, 14, 15, 1), PackedInt32Array(16, 12, 11), PackedInt32Array(15, 17, 18, 19, 20), PackedInt32Array(21, 18, 17, 22), PackedInt32Array(23, 24, 25, 26, 27), PackedInt32Array(28, 5, 29, 10), PackedInt32Array(28, 10, 9, 30), PackedInt32Array(30, 9, 31, 6), PackedInt32Array(7, 6, 31, 32), PackedInt32Array(16, 11, 33, 34), PackedInt32Array(35, 19, 36, 37), PackedInt32Array(38, 37, 36), PackedInt32Array(39, 38, 36), PackedInt32Array(40, 39, 36, 41, 42), PackedInt32Array(43, 44, 20, 45, 46), PackedInt32Array(14, 0, 47, 22), PackedInt32Array(21, 22, 47, 48), PackedInt32Array(32, 13, 12, 49, 7), PackedInt32Array(50, 7, 49, 34), PackedInt32Array(50, 34, 33), PackedInt32Array(51, 50, 33, 52), PackedInt32Array(53, 2, 43, 46), PackedInt32Array(2, 53, 54), PackedInt32Array(3, 2, 54), PackedInt32Array(3, 54, 55), PackedInt32Array(45, 37, 38, 46), PackedInt32Array(42, 53, 46, 40), PackedInt32Array(42, 5, 56, 57, 58, 3, 55), PackedInt32Array(58, 57, 59, 60, 61), PackedInt32Array(42, 41, 29, 5), PackedInt32Array(59, 57, 27, 26), PackedInt32Array(52, 23, 27, 62), PackedInt32Array(19, 35, 20), PackedInt32Array(20, 44, 1), PackedInt32Array(15, 20, 1), PackedInt32Array(4, 3, 63, 48), PackedInt32Array(21, 48, 63, 64), PackedInt32Array(65, 21, 64, 58), PackedInt32Array(61, 65, 58), PackedInt32Array(66, 61, 60), PackedInt32Array(33, 66, 60, 25), PackedInt32Array(33, 25, 24), PackedInt32Array(33, 24, 67), PackedInt32Array(33, 67, 52), PackedInt32Array(62, 51, 52), PackedInt32Array(62, 27, 8, 7), PackedInt32Array(5, 8, 56)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-3, -2, 1, 1026, 1917, 1024, 1918, 3)])

[node name="FSM vs_ BT DEMO" type="Node2D"]

[node name="GlobalCoordinator" parent="." node_paths=PackedStringArray("player", "player_block", "patrol_nodes") instance=ExtResource("1_e6t2j")]
player = NodePath("../Player")
player_block = NodePath("../PlayerBlock")
patrol_nodes = [NodePath("../PatrolNodes/PatrolNode"), NodePath("../PatrolNodes/PatrolNode2"), NodePath("../PatrolNodes/PatrolNode3"), NodePath("../PatrolNodes/PatrolNode4"), NodePath("../PatrolNodes/PatrolNode5"), NodePath("../PatrolNodes/PatrolNode6"), NodePath("../PatrolNodes/PatrolNode7"), NodePath("../PatrolNodes/PatrolNode8"), NodePath("../PatrolNodes/PatrolNode9"), NodePath("../PatrolNodes/PatrolNode10"), NodePath("../PatrolNodes/PatrolNode11"), NodePath("../PatrolNodes/PatrolNode12"), NodePath("../PatrolNodes/PatrolNode13"), NodePath("../PatrolNodes/PatrolNode14"), NodePath("../PatrolNodes/PatrolNode15"), NodePath("../PatrolNodes/PatrolNode16"), NodePath("../PatrolNodes/PatrolNode17")]

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
navigation_polygon = SubResource("NavigationPolygon_vbtsb")

[node name="Level" parent="NavigationRegion2D" instance=ExtResource("2_4ollf")]

[node name="PlayerBlock" parent="." instance=ExtResource("2_6kotc")]
position = Vector2(392, 352)

[node name="FsmNpcSpawner" parent="." instance=ExtResource("2_ib4qg")]
position = Vector2(1514, 229)
max_npc_count = 5

[node name="PatrolNodes" type="Node2D" parent="."]
position = Vector2(409, 434)
scale = Vector2(0.25, 0.25)

[node name="PatrolNode" parent="PatrolNodes" instance=ExtResource("5_7ixm2")]
position = Vector2(-580, 1724)

[node name="PatrolNode2" parent="PatrolNodes" instance=ExtResource("5_7ixm2")]
position = Vector2(872, 2128)

[node name="PatrolNode3" parent="PatrolNodes" instance=ExtResource("5_7ixm2")]
position = Vector2(2804, 924)

[node name="PatrolNode4" parent="PatrolNodes" instance=ExtResource("5_7ixm2")]
position = Vector2(3488, 2184)

[node name="PatrolNode5" parent="PatrolNodes" instance=ExtResource("5_7ixm2")]
position = Vector2(4936, 1148)

[node name="PatrolNode6" parent="PatrolNodes" instance=ExtResource("5_7ixm2")]
position = Vector2(5756, -36)

[node name="PatrolNode7" parent="PatrolNodes" instance=ExtResource("5_7ixm2")]
position = Vector2(4392, -108)

[node name="PatrolNode8" parent="PatrolNodes" instance=ExtResource("5_7ixm2")]
position = Vector2(4444, -1464)

[node name="PatrolNode9" parent="PatrolNodes" instance=ExtResource("5_7ixm2")]
position = Vector2(2092, -1432)

[node name="PatrolNode10" parent="PatrolNodes" instance=ExtResource("5_7ixm2")]
position = Vector2(2060, -168)

[node name="PatrolNode11" parent="PatrolNodes" instance=ExtResource("5_7ixm2")]
position = Vector2(972, -152)

[node name="PatrolNode12" parent="PatrolNodes" instance=ExtResource("5_7ixm2")]
position = Vector2(916, -1436)

[node name="PatrolNode13" parent="PatrolNodes" instance=ExtResource("5_7ixm2")]
position = Vector2(916, -1436)

[node name="PatrolNode14" parent="PatrolNodes" instance=ExtResource("5_7ixm2")]
position = Vector2(-40, -1428)

[node name="PatrolNode15" parent="PatrolNodes" instance=ExtResource("5_7ixm2")]
position = Vector2(-60, -600)

[node name="PatrolNode16" parent="PatrolNodes" instance=ExtResource("5_7ixm2")]
position = Vector2(-1380, -560)

[node name="PatrolNode17" parent="PatrolNodes" instance=ExtResource("5_7ixm2")]
position = Vector2(-1368, 756)

[node name="DebugBox" parent="." instance=ExtResource("2_0vidy")]
visible = false
position = Vector2(409, 434)

[node name="Player" parent="." groups=["Player"] instance=ExtResource("6_qvy4h")]
position = Vector2(394, 357)
